var fs = require('fs');
eval(fs.readFileSync('PayloadDecoderFunction.js')+'');

/*let payload;
let result;

// Device Information
payload = [0x0C, 0x01, 0x13, 0x00, 0x13, 0x26, 0x00, 0x00, 0x00, 0x01, 0x25, 0x4D, 0x4F, 0xCA, 0x40, 0xA4, 0xFC, 0x2B, 0x0D, 0x10];
result = Decoder(payload, 4);
console.log(result);

payload = [0x01, 0x02, 0x00, 0xD3, 0xFF, 0xFF, 0xFF, 0xFF, 0x3C, 0x77, 0x2C, 0xAC, 0x41, 0xAF, 0x51, 0x80, 0x3F, 0x71, 0x70, 0xF8, 0x41, 0xAA, 0xCC, 0xCD];
result = Decoder(payload, 1); 
console.log(result);

payload = [0x01, 0x09, 0x0C, 0xD7, 0xFF, 0xFF, 0xFF, 0xFF, 0x3A, 0x99, 0xF8, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0x41, 0xA1, 0xC4, 0x30, 0x3F, 0x77, 0x8F, 0xEF, 0x41, 0xAA, 0x14, 0x7B, 0x3B, 0x43, 0x66, 0xA9, 0x3B, 0x2F, 0x7A, 0x1A];
result = Decoder(payload, 1);
console.log(result);*/

describe("A suite is just a function", function() {  
    it("and so is a spec", function() {
        var payload = [0x0C, 0x01, 0x13, 0x00, 0x13, 0x26, 0x00, 0x00, 0x00, 0x01, 0x25, 0x4D, 0x4F, 0xCA, 0x40, 0xA4, 0xFC, 0x2B, 0x0D, 0x10];
        var result = Decoder(payload, 4);
  
        expect(result).toEqual({
            func: 12,
            port: 4,
            payload: '0C011300132600000001254D4FCA40A4FC2B0D10',
            battery_voltage: 5.155782222747803,
            battery_capacity_percentage: 13,
            humidity_percentage: 16,
            class_group_text: '19.00',
            sw_version_text: '19.38',
            serial_number: 1,
            device_local_datetime: '2019-10-31 07:54:50'
        });
    });
});